System.register(["jimu-core","jimu-core/react","esri/layers/FeatureLayer","esri/Graphic","jimu-ui","jimu-arcgis"],(function(e,t){var a={},r={},n={},o={},i={},l={};return{setters:[function(e){a.React=e.React},function(e){r.useEffect=e.useEffect,r.useState=e.useState},function(e){n.default=e.default},function(e){o.default=e.default},function(e){i.AlertPopup=e.AlertPopup,i.Button=e.Button},function(e){l.MapViewManager=e.MapViewManager}],execute:function(){e((()=>{var e={89:e=>{"use strict";e.exports=o},633:e=>{"use strict";e.exports=n},686:e=>{"use strict";e.exports=l},244:e=>{"use strict";e.exports=a},972:e=>{"use strict";e.exports=r},321:e=>{"use strict";e.exports=i}},t={};function c(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,c),n.exports}c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="";var s={};return c.p=window.jimuConfig.baseUrl,(()=>{"use strict";c.r(s),c.d(s,{__set_webpack_public_path__:()=>u,default:()=>l});var e=c(244),t=c(972),a=c(633),r=c(89),n=c(321),o=c(686),i=function(e,t,a,r){return new(a||(a=Promise))((function(n,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))};const l=l=>{let c="https://services.arcgis.com/deQSb0Gn7gDPf3uV/arcgis/rest/services/shp_validacion_modelo_8/FeatureServer/0",[s,u]=(0,t.useState)([]),[d,p]=(0,t.useState)(null);(0,t.useEffect)((()=>{(()=>{const e=o.MapViewManager.getInstance().getAllJimuMapViews();if(e.length>0){let t=e[0].view;p(t)}})(),i(void 0,void 0,void 0,(function*(){let e=new a.default({url:c}),t=yield e.queryFeatures({where:"1=1",returnGeometry:!0,outFields:["*"]});console.log(t),u(t.features)}))}),[]);const[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)("");return e.React.createElement("div",{className:"widget-demo jimu-widget m-2",style:{overflow:"auto"}},f&&e.React.createElement(n.AlertPopup,{title:"Atenci\xf3n",onClickOk:()=>{m(!1)},onClickClose:()=>{m(!1)},isOpen:f},g),e.React.createElement("div",{className:"d-flex justify-content-center flex-column align-items-center"},e.React.createElement("h1",null,"Revisi\xf3n de detecci\xf3nes de palma"),e.React.createElement("br",null),"En esta herramienta podr\xe1s verificar las detecciones de nuestro modelo de Deep learning para individuos de palma de aceite.",e.React.createElement("br",null),"Podr\xe1s marcar si la detecci\xf3n es o no, correcta, de esta manera Nos ayudar\xe1s a mejorar nuestro modelo. \xa1Gracias!"),e.React.createElement("div",{style:{height:"300px",maxHeight:"300px",overflow:"auto"}},e.React.createElement("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:"Arial, sans-serif",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",backgroundColor:"#fff",marginTop:"20px",overflowY:"auto"}},e.React.createElement("thead",null,e.React.createElement("tr",null,e.React.createElement("th",{style:{backgroundColor:"#002958",color:"white",textAlign:"left",padding:"12px 15px",fontSize:"16px"}},"Clase detectada"),e.React.createElement("th",{style:{backgroundColor:"#002958",color:"white",textAlign:"left",padding:"12px 15px",fontSize:"16px"}},"Confianza de la detecci\xf3n (%)"),e.React.createElement("th",{style:{backgroundColor:"#002958",color:"white",textAlign:"left",padding:"12px 15px",fontSize:"16px"}},"\xbfEs correcta la detecci\xf3n?"),e.React.createElement("th",{style:{backgroundColor:"#002958",color:"white",textAlign:"left",padding:"12px 15px",fontSize:"16px"}},"Acci\xf3n"))),e.React.createElement("tbody",null,null==s?void 0:s.map(((t,a)=>e.React.createElement("tr",{key:a,style:{backgroundColor:a%2==0?"#f2f2f2":"transparent"}},e.React.createElement("td",{style:{padding:"10px 15px",borderBottom:"1px solid #ddd",textAlign:"left"}},t.attributes.Class),e.React.createElement("td",{style:{padding:"10px 15px",borderBottom:"1px solid #ddd",textAlign:"left"}},t.attributes.Confidence),e.React.createElement("td",{style:{padding:"10px 15px",borderBottom:"1px solid #ddd",textAlign:"left"}},e.React.createElement("select",{value:null===t.attributes.verificacion||"NO"===t.attributes.verificacion?"NO":"SI",onChange:e=>{((e,t)=>{i(void 0,void 0,void 0,(function*(){let{value:a}=e.target,r=[...s];r.forEach((e=>{e.attributes.FID===t&&(e.attributes.verificacion=a,e.attributes.hasChanged=!0)})),u(r)}))})(e,t.attributes.FID)}},e.React.createElement("option",{value:"NO"},"NO"),e.React.createElement("option",{value:"SI"},"SI"))),e.React.createElement("td",null,e.React.createElement(n.Button,{type:"primary",onClick:e=>{((e,t)=>{if(d){console.log(d);let e=d.map.layers.find((e=>"Resultados_modelo"===e.title));if(e&&"feature"===e.type){const a=e.createQuery();a.where=`FID = '${t}'`,a.returnGeometry=!0,e.queryFeatures(a).then((e=>{if(console.log(e),e.features.length>0){const t=e.features[0];d.goTo(t.geometry)}}))}}})(0,t.attributes.FID)}},"Zoom a detecci\xf3n")))))))),e.React.createElement("div",{className:"d-flex justify-content-center mt-4"},e.React.createElement(n.Button,{type:"secondary",onClick:e=>i(void 0,void 0,void 0,(function*(){try{const e=new a.default({url:c});let t=s.map((e=>{if(e.attributes.hasChanged)return new r.default({attributes:{FID:e.attributes.FID,Class:e.attributes.Class,Confidence:e.attributes.Confidence,Shape_Area:e.attributes.Shape_Area,Shape_Leng:e.attributes.Shape_Leng,Shape__Area:e.attributes.Shape__Area,Shape__Length:e.attributes.Shape__Length,verificacion:e.attributes.verificacion}})})).filter((e=>e));if(m(!0),console.log(t.length),0===t.length)return v("No hay elementos para guardar, por favor, realiza una revisi\xf3n"),void setTimeout((()=>{m(!1)}),4e3);let n=yield e.applyEdits({updateFeatures:t});m(!0),n.updateFeatureResults.length>0?v("Revisi\xf3n guardada"):v("Algo fall\xf3 en el servidor, por favor intente mas tarde"),setTimeout((()=>{m(!1)}),4e3)}catch(e){v("Revisi\xf3n guardada")}}))},"Guardar revisi\xf3n")))};function u(e){c.p=e}})(),s})())}}}));